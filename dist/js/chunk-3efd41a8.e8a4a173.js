(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3efd41a8"],{3996:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb bg-beige border-bottom"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-lightgrey ",staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[t._v("首頁")])],1),s("li",{staticClass:"breadcrumb-item font-weight-bold active text-coffee2",attrs:{"aria-current":"page"}},[t._v("購物車")])])]),s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),t.cart.length?s("div",{staticClass:"cart container py-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 col-lg-8 col-12 cart-border"},[s("div",{staticClass:"text-right mt-3"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.removeItems}},[s("i",{staticClass:"fas fa-times"},[t._v(" 清除購物車")])])]),s("div",{staticClass:"cart-table"},[s("table",{staticClass:"table mt-3 mb-0 cart-table"},[t._m(1),t.cart.length?s("tbody",t._l(t.cart,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn text-danger",attrs:{type:"button"},on:{click:function(s){return t.removeItem(a.product.id)}}},[s("i",{staticClass:"fas fa-times"})])]),s("td",{staticClass:"align-middle"},[s("a",{staticClass:"productTitle",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.goToProduct(a.product.id)}}},[t._v(" "+t._s(a.product.title))])]),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"input-group"},[s("div",{staticClass:"input-group-prepend"},[s("button",{staticClass:"btn btn-outline-coffee2",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(s){return t.quantityUpdate(a.product.id,a.quantity-1)}}},[t._v("-")])]),s("input",{staticClass:"form-control text-center",attrs:{type:"text"},domProps:{value:a.quantity}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-coffee2",attrs:{type:"button"},on:{click:function(s){return t.quantityUpdate(a.product.id,a.quantity+1)}}},[t._v("+")])])])]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.product.unit))]),s("td",{staticClass:"align-middle text-right font-weight-bold"},[t._v(" $ "+t._s(t._f("thousand")(a.product.price*a.quantity))+" 元 ")])])})),0):t._e(),s("tfoot",{staticClass:"cart-foot mt-3"},[t.cart.length?s("tr",[s("td",[s("button",{staticClass:"btn btn-coffee2",attrs:{type:"button"},on:{click:t.backToShop}},[t._v(" 繼續購物")])]),s("td"),s("td"),s("td",{staticClass:"text-right total-price"},[t._v("總計")]),s("td",{staticClass:"text-right font-weight-bold"},[t._v("$ "+t._s(t._f("thousand")(t.cartTotal))+" 元")])]):t._e()])])])]),s("div",{staticClass:"col-md-12  col-lg-4 col-12 orderInfo"},[s("div",{staticClass:"cart-border ",staticStyle:{width:"20rem"}},[s("div",{staticClass:"card-header text-left pt-3 text-coffee2"},[t._v("訂單資訊")]),s("div",{staticClass:"card-body my-3"},[s("div",{staticClass:"d-flex"},[s("p",{staticClass:"ml-4"},[t._v("商品總計")]),s("span",{staticClass:"ml-auto mr-4"},[t._v("NT$ "+t._s(t._f("thousand")(t.cartTotal)))])]),t._m(2)]),s("div",{staticClass:"card-footer pt-3 pb-3"},[s("div",{staticClass:"d-flex py-3"},[s("p",{staticClass:"ml-4"},[t._v("結帳金額")]),s("span",{staticClass:"ml-auto mr-4 font-weight-bold h5"},[t._v(" NT$ "+t._s(t._f("thousand")(t.cartTotal)))])]),s("button",{staticClass:"btn btn-coffee2",staticStyle:{width:"100%"},on:{click:t.stepToPayway}},[t._v(" 下一步")])])])])])]):s("div",{staticClass:"cart container"},[s("div",{staticClass:"text-center"},[t._m(3),s("p",[t._v("您的購物車中沒有商品")]),s("div",{staticClass:"btn btn-coffee2 cart-goshop",attrs:{type:"button"},on:{click:t.goToShop}},[t._v("去購物")])])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container shopping-step py-5"},[s("ol",{staticClass:"step d-flex justify-content-center"},[s("li",{staticClass:"step1"},[s("div",{staticClass:"d-flex justify-content-center align-items-center"},[t._v("1")]),s("span",[t._v("確認購物車")])]),s("li",{staticClass:"step2"},[s("div",{staticClass:"d-flex justify-content-center align-items-center"},[t._v("2")]),s("span",[t._v("填寫資料與付款方式")])]),s("li",{staticClass:"step3"},[s("div",{staticClass:"d-flex justify-content-center align-items-center"},[t._v("3")]),s("span",[t._v("確認付款")])]),s("li",{staticClass:"step4"},[s("div",{staticClass:"d-flex justify-content-center align-items-center"},[t._v("4")]),s("span",[t._v("完成訂購")])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("th",[t._v("刪除")]),s("th",[t._v("商品名稱")]),s("th",{attrs:{width:"150px"}},[t._v("數量")]),s("th",[t._v("單位")]),s("th",{staticClass:"text-center",attrs:{width:"130px"}},[t._v("單價")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"d-flex"},[s("p",{staticClass:"ml-4"},[t._v("運費總計")]),s("span",{staticClass:"ml-auto mr-4"},[t._v("NT$ 0")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("p",{staticStyle:{"font-size":"6rem"}},[s("i",{staticClass:"fas fa-shopping-cart"})])}],c=(s("99af"),s("4160"),s("159b"),{data:function(){return{cart:{},cartTotal:0,isLoading:!1}},methods:{goToShop:function(){this.$router.push("/products")},getCartItems:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/","api/").concat("daa979c0-17ef-4c8f-8a22-f4834d3fce7a","/ec/shopping");this.isLoading=!0,this.$http.get(a).then((function(a){t.cart=a.data.data,t.updateCartTotal(),t.isLoading=!1}))},removeItems:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/","api/").concat("daa979c0-17ef-4c8f-8a22-f4834d3fce7a","/ec/shopping/all/product");this.isLoading=!0,this.$http.delete(a).then((function(a){console.log(a),t.$bus.$emit("get-cart"),t.getCartItems(),t.isLoading=!1}))},removeItem:function(t){var a=this,s="".concat("https://course-ec-api.hexschool.io/","api/").concat("daa979c0-17ef-4c8f-8a22-f4834d3fce7a","/ec/shopping/").concat(t);this.isLoading=!0,this.$http.delete(s,t).then((function(){a.$bus.$emit("get-cart"),a.getCartItems(),a.isLoading=!1}))},goToProduct:function(t){this.$router.push("/product/".concat(t))},quantityUpdate:function(t,a){var s=this,i="".concat("https://course-ec-api.hexschool.io/","api/").concat("daa979c0-17ef-4c8f-8a22-f4834d3fce7a","/ec/shopping"),e={product:t,quantity:a};this.isLoading=!0,this.$http.patch(i,e).then((function(){s.getCartItems(),s.isLoading=!1}))},updateCartTotal:function(){var t=this;this.cartTotal=0,this.cart.forEach((function(a){t.cartTotal+=a.quantity*a.product.price}))},stepToPayway:function(){this.$bus.$emit("orderMoney",this.cartTotal),this.$router.push("/paybill")},backToShop:function(){this.$router.push("/products")}},mounted:function(){this.getCartItems()}}),n=c,o=(s("788b"),s("2877")),r=Object(o["a"])(n,i,e,!1,null,null,null);a["default"]=r.exports},"788b":function(t,a,s){"use strict";var i=s("9d9a"),e=s.n(i);e.a},8418:function(t,a,s){"use strict";var i=s("c04e"),e=s("9bf2"),c=s("5c6c");t.exports=function(t,a,s){var n=i(a);n in t?e.f(t,n,c(0,s)):t[n]=s}},"99af":function(t,a,s){"use strict";var i=s("23e7"),e=s("d039"),c=s("e8b5"),n=s("861d"),o=s("7b0b"),r=s("50c4"),l=s("8418"),d=s("65f0"),u=s("1dde"),f=s("b622"),p=s("2d00"),h=f("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",C=p>=51||!e((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=u("concat"),m=function(t){if(!n(t))return!1;var a=t[h];return void 0!==a?!!a:c(t)},_=!C||!g;i({target:"Array",proto:!0,forced:_},{concat:function(t){var a,s,i,e,c,n=o(this),u=d(n,0),f=0;for(a=-1,i=arguments.length;a<i;a++)if(c=-1===a?n:arguments[a],m(c)){if(e=r(c.length),f+e>v)throw TypeError(b);for(s=0;s<e;s++,f++)s in c&&l(u,f,c[s])}else{if(f>=v)throw TypeError(b);l(u,f++,c)}return u.length=f,u}})},"9d9a":function(t,a,s){}}]);
//# sourceMappingURL=chunk-3efd41a8.e8a4a173.js.map